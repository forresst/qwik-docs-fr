---
title: Qwik City Vue d'ensemble des données
contributors:
  - adamdbradley
---

# Vue d'ensemble des données

Chaque route a la possibilité d'ajouter des gestionnaires de requête et de réponse HTTP, permettant aux développeurs de [récupérer](../retrieve/index.mdx) et de [modifier](../modify/index.mdx) des données. Les gestionnaires peuvent également être utilisés par les [endpoints](../endpoints/index.mdx), qui répondent uniquement avec des données plutôt qu'avec le code HTML d'une page.

Cette fonctionnalité vous permet de traiter n'importe quel événement de requête, d'avoir des effets secondaires sur le pipeline de requête, juste avant de rendre le composant et de répondre avec un contenu personnalisé. Elle est disponible pour les pages, les mises en page et les routes de endpoint, mais pas pour les composants ordinaires.

## Gestionnaires de requêtes et de réponses

Sur les pages, les mises en page et les [endpoints](../endpoints/index.mdx), nous pouvons accéder aux données de la requête en implémentant des fonctions de gestion des requêtes telles que `onGet`, `onPost`, `onPut`, etc. Ces fonctions sont exécutées en fonction de la [méthode HTTP](https://developer.mozilla.org/fr/docs/Web/HTTP/Methods) utilisée pour cette route.

De plus, une fonction `onRequest` peut être utilisée pour gérer n'importe quelle méthode de requête, plutôt qu'une méthode spécifique. Par exemple, si les fonctions `onGet` et `onRequest` sont fournies, pour une requête `GET`, la fonction `onGet` sera appelée. Cependant, dans ce scénario, si une méthode de requête `POST` arrivait, alors le gestionnaire `onRequest` serait appelé puisqu'un `onPost` n'a pas été fourni.
Le gestionnaire `onRequest` est disponible comme un fourre-tout pour toutes les méthodes de requête qui n'ont pas de méthode spécifique.

```typescript
import type { RequestHandler } from '@builder.io/qwik-city';

export const onGet: RequestHandler<ProductData> = async ({ params }) => {
  // mettez votre accès au base de données ici (codage en dur des données pour la simplicité)
  return {
    skuId: params.skuId,
    price: 123.45,
    description: `Description pour ${params.skuId}`,
  };
};
```

## Evénement de requête

Les fonctions de traitement des requêtes reçoivent un argument `RequestEvent` qui a les propriétés suivantes :

| Champ      | Description                                                                                        |
| ---------- | -------------------------------------------------------------------------------------------------- |
| `request`  | L'objet de la requête                                                                              |
| `response` | L'objet de réponse, qui peut être utilisé pour définir les `headers` et le `status` de la réponse. |
| `url`      | URL qui inclut `pathname`, `hostname`, etc.                                                        |
| `next`     | Prochaine fonction du middleware                                                                   |
| `abort`    | Fonction d'annulation de la requête                                                                |
| `params`   | Paramètres personnalisés de l'utilisateur trouvés dans l'URL                                       |
| `platform` | Objet de données de plateforme (utile pour Cloudflare, Netlify, etc.)                              |
