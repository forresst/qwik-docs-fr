---
title: Configuration de la génération de sites statiques
contributors:
  - adamdbradley
  - wtho
---

# Configuration de la génération de sites statiques

Vous trouverez ci-dessous un exemple de fichier `src/entry.static.tsx`, qui est le fichier initial utilisé pour la construction d'un site statique (SSG). Tout comme le fichier d'entrée d'un serveur pour SSR, tel que `src/entry.server.tsx`, il doit importer la fonction `render` de votre appli depuis `./entry.ssr`.

```typescript
// Fichier : src/entry.static.tsx
import { qwikCityGenerate } from '@builder.io/qwik-city/static/node';
import render from './entry.ssr';
import { fileURLToPath } from 'node:url';
import { join } from 'node:path';

qwikCityGenerate(render, {
  origin: 'https://qwik.builder.io',
  outDir: join(fileURLToPath(import.meta.url), '..', '..', 'dist'),
});
```

Vous pouvez ensuite ajouter le script `build.ssg` au fichier `package.json` pour construire le code du générateur et l'ajouter au script `build` pour qu'il soit prêt après chaque construction :

```json
  "build": "npm run build.client && npm run build.ssr && npm run build.ssg",
  "build.ssg": "vite build --ssr src/entry.static.tsx",
```

Dans node, vous pouvez exécuter la génération après la construction en utilisant :
```bash
node server/entry.static.js
```

Vos fichiers de construction seront générés dans le dossier `dist`, comme configuré dans `src/entry.static.tsx`.

## Configuration SSG

Le fichier `src/entry.static.tsx` inclut également la configuration SSG, qui sera personnalisée pour chaque implémentation.

### `origin`

L'URL `origin`, qui est une combinaison du schéma (protocole) et du nom d`hôte (domaine).
Par exemple, `https://qwik.builder.io` a le protocole `https://` et le domaine `qwik.builder.io`.
Cependant, le `origin` ne comprend pas de `pathname`.

Le `origin` est utilisé pour fournir une URL complète pendant la génération de sites statiques (SSG), et pour
simuler une URL complète plutôt qu'un simple `pathname`. Par exemple, afin de
rendre une URL de balise canonique correcte ou des URL dans le fichier `sitemap.xml`, l'`origin` doit également
être fournie également.

Si le site commence aussi avec un chemin autre que `/`, veuillez utiliser l'option `basePathname`
dans les options de configuration de Qwik City.

### `outDir`

Le `outDir` est un répertoire de sortie du système de fichiers où les fichiers statiques doivent être écrits. Dans l'exemple ci-dessus, il utilise [fileURLToPath](https://nodejs.org/api/url.html#urlfileurltopathurl) de Node pour créer un chemin absolu du système de fichiers pour écrire les fichiers HTML statiques.

## Exécution de Javascript

Pour un projet Javascript, il est assez commun que le runtime de la compilation soit construit au dessus de [Node.js] (https://nodejs.org/en/docs/). Cependant, le coeur de la génération de site statique de Qwik City n'est pas lié à l'utilisation de Node.js, c'est pourquoi la fonction `qwikCityGenerate()` est importée de `@builder.io/qwik-city/static/node`. En scopant la fonction generate à un runtime spécifique, comme Node.js, cela donne à Qwik City la flexibilité de générer des SSG à partir d'autres runtimes dans le futur, comme [Deno](https://deno.land/) ou [Bun](https://bun.sh/).
